#pragma once

#include "types/Position.h"
#include "types/Types.h"

#include <array>
#include <functional>
#include <unordered_map>

namespace Game3 {
	constexpr std::array<int, 256> marchingArray8{
		40, -1, 20, -1, -1, -1, -1, -1, 33, -1, 26, 23, -1, -1, -1, -1,
		31, -1, 24, -1, -1, -1, 21, -1, 32, -1, 25, 46, -1, -1, 45, 22,
		-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
		-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
		 0, -1, 10, -1, -1, -1, -1, -1,  6, -1, 16, 35, -1, -1, -1, -1,
		 4, -1, 14, -1, -1, -1, 36, -1,  5, -1, 18, 38, -1, -1, 39,  8,
		-1, -1, -1, -1, -1, -1, -1, -1,  3, -1, 47, 13, -1, -1, -1, -1,
		-1, -1, -1, -1, -1, -1, -1, -1, 34, -1, 48, 17, -1, -1, 43,  7,
		-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
		-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
		-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
		-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
		-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
		 1, -1, 44, -1, -1, -1, 11, -1, 37, -1, 49, 42, -1, -1, 19,  9,
		-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
		-1, -1, -1, -1, -1, -1, -1, -1,  2, -1, 28, 27, -1, -1, 29, 12,
	};

	constexpr std::array<int,  16> marchingArray4{22, 17, 6, 16, 4, 14, 1, 26, 3, 7, 2, 20, 0, 18, 12, 19};

	TileID march8(const std::function<bool(int8_t, int8_t)> &);
	TileID march4(const std::function<bool(int8_t, int8_t)> &);
}
